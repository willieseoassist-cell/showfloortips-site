<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loading... - ShowFloorTips</title>
    <link rel="stylesheet" href="/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        .city-hero { background:#0a0a0a; color:#fff; padding:4rem 2rem 3rem; text-align:center }
        .city-hero h1 { font-size:2.8rem; font-weight:800; letter-spacing:-0.03em; margin-bottom:0.75rem; max-width:800px; margin-left:auto; margin-right:auto }
        .city-hero p { font-size:1.1rem; color:#94a3b8; max-width:640px; margin:0 auto; line-height:1.7 }
        .city-hero .hero-stats { display:flex; justify-content:center; gap:2.5rem; margin-top:2rem; flex-wrap:wrap }
        .city-hero .hero-stat { text-align:center }
        .city-hero .hero-stat-num { font-size:1.75rem; font-weight:800; color:#fff }
        .city-hero .hero-stat-label { font-size:0.8rem; color:#64748b; text-transform:uppercase; letter-spacing:0.05em; margin-top:0.25rem }
        .city-content { max-width:1000px; margin:0 auto; padding:2rem }
        .city-intro { font-size:1.05rem; color:#334155; line-height:1.85; margin-bottom:2.5rem; padding:1.5rem; background:#f8fafc; border-radius:12px; border:1px solid #e2e8f0 }
        .city-grid { display:flex; flex-direction:column; gap:1.25rem }
        .city-card { background:#fff; border:1px solid #e2e8f0; border-radius:16px; padding:1.75rem; display:grid; grid-template-columns:auto 1fr auto; gap:1.5rem; align-items:start; transition:border-color 0.2s, box-shadow 0.2s }
        .city-card:hover { border-color:#334155; box-shadow:0 4px 16px rgba(0,0,0,0.06) }
        .city-rank { width:48px; height:48px; background:#0a0a0a; color:#fff; border-radius:12px; display:flex; align-items:center; justify-content:center; font-weight:800; font-size:1.1rem; flex-shrink:0 }
        .city-card-body h3 { font-size:1.15rem; font-weight:700; color:#0a0a0a; margin-bottom:0.5rem; line-height:1.3 }
        .city-card-body h3 a { color:inherit; text-decoration:none }
        .city-card-body h3 a:hover { color:#334155 }
        .city-card-meta { display:flex; flex-wrap:wrap; gap:0.5rem; margin-bottom:0.75rem }
        .city-card-tag { display:inline-flex; align-items:center; gap:0.3rem; background:#f1f5f9; color:#475569; font-size:0.8rem; padding:0.3rem 0.65rem; border-radius:6px; font-weight:500 }
        .city-card-desc { font-size:0.9rem; color:#64748b; line-height:1.6 }
        .city-card-action { display:flex; flex-direction:column; align-items:flex-end; gap:0.5rem; min-width:120px }
        .city-card-action .btn-view { display:inline-block; padding:0.65rem 1.25rem; background:#0a0a0a; color:#fff; border-radius:8px; font-size:0.85rem; font-weight:600; text-decoration:none; white-space:nowrap; transition:background 0.2s }
        .city-card-action .btn-view:hover { background:#1e293b }
        .city-card-action .card-attendees { font-size:0.85rem; color:#64748b; font-weight:500; white-space:nowrap }
        .load-more-container { text-align:center; margin:2rem 0 }
        .load-more-btn { padding:0.875rem 2.5rem; background:#0a0a0a; color:#fff; border:none; border-radius:10px; font-size:0.95rem; font-weight:600; cursor:pointer; transition:background 0.2s }
        .load-more-btn:hover { background:#1e293b }
        .scannly-cta { background:#eef2ff; border:1px solid #c7d2fe; border-radius:16px; padding:2rem; text-align:center; margin:2.5rem 0 }
        .scannly-cta h3 { font-size:1.2rem; font-weight:700; color:#1e293b; margin-bottom:0.5rem }
        .scannly-cta p { color:#475569; font-size:0.9rem; margin-bottom:1rem; max-width:480px; margin-left:auto; margin-right:auto }
        .scannly-cta a { display:inline-block; padding:0.75rem 1.75rem; background:#6366f1; color:#fff; border-radius:10px; font-weight:600; text-decoration:none; transition:background 0.2s }
        .scannly-cta a:hover { background:#818cf8 }
        .browse-cities { background:#f8fafc; border:1px solid #e2e8f0; border-radius:16px; padding:2rem; margin:2.5rem 0 }
        .browse-cities h3 { font-size:1.2rem; font-weight:700; color:#0a0a0a; margin-bottom:1.25rem; text-align:center }
        .browse-cities-grid { display:flex; flex-wrap:wrap; gap:0.5rem; justify-content:center }
        .browse-cities-grid a { display:inline-block; padding:0.4rem 0.85rem; border-radius:6px; font-size:0.82rem; font-weight:500; color:#475569; text-decoration:none; transition:background 0.2s, color 0.2s; border:1px solid #e2e8f0; background:#fff }
        .browse-cities-grid a:hover { background:#0a0a0a; color:#fff; border-color:#0a0a0a }
        .browse-cities-grid a.active { background:#0a0a0a; color:#fff; border-color:#0a0a0a }
        @media(max-width:768px) {
            .city-hero h1 { font-size:1.75rem }
            .city-card { grid-template-columns:auto 1fr; gap:1rem }
            .city-card-action { flex-direction:row; align-items:center; grid-column:1 / -1 }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-inner">
            <a href="/" class="logo">ShowFloorTips</a>
            <nav class="nav-links">
                <a href="/#shows">Trade Shows</a>
                <a href="/news.html">News</a>
                <a href="/roi-calculator.html">ROI Calculator</a>
                <a href="/products.html">Products</a>
                <a href="/scannly.html" class="nav-cta">Try Scannly</a>
            </nav>
        </div>
    </header>

    <div id="page-content">
        <div style="text-align:center;padding:4rem 2rem;color:#64748b;font-size:1.1rem">Loading...</div>
    </div>

    <footer class="footer">
        <div class="footer-inner">
            <p>ShowFloorTips - Your Guide to Trade Shows & Exhibitions</p>
            <p><a href="/scannly.html">Scannly App</a></p>
        </div>
    </footer>

    <script src="/shows.js"></script>
    <script>
    (function() {
        'use strict';

        // City-specific intro paragraphs for top 30 cities
        var CITY_INTROS = {
            'Las Vegas': 'Las Vegas is the undisputed trade show capital of the world. Home to the Las Vegas Convention Center and the Mandalay Bay Convention Center, the city hosts more major trade shows than any other destination. From CES and CONEXPO to MAGIC and SEMA, Las Vegas offers unmatched venue capacity, world-class hospitality, and seamless logistics that make it the top choice for exhibitors and attendees alike.',
            'Orlando': 'Orlando is a powerhouse trade show destination, anchored by the Orange County Convention Center, one of the largest convention facilities in the United States. The city\'s tourism infrastructure, warm climate, and proximity to major theme parks make it an attractive choice for large-scale industry events across healthcare, technology, food service, and more.',
            'Chicago': 'Chicago is a premier trade show city with deep roots in American industry and commerce. McCormick Place, the largest convention center in North America, hosts hundreds of major events each year. The city\'s central location, world-class dining, and robust transportation network make it a natural hub for manufacturing, food, technology, and healthcare exhibitions.',
            'New York': 'New York City is a global epicenter for trade shows spanning fashion, technology, media, finance, and luxury goods. The Javits Center on Manhattan\'s west side serves as the primary convention venue, while countless boutique events take place across the five boroughs. The city\'s international reach and media presence amplify the impact of every exhibition held here.',
            'Houston': 'Houston is the undisputed capital of energy trade shows, home to events like OTC (Offshore Technology Conference) and CERAWeek. The George R. Brown Convention Center and NRG Center host major industrial, medical, and technology exhibitions. The city\'s deep ties to oil, gas, aerospace, and healthcare make it a must-visit destination for these industries.',
            'Dallas': 'Dallas is a rapidly growing trade show market, bolstered by the Kay Bailey Hutchison Convention Center and a thriving business ecosystem. The city\'s central U.S. location, pro-business climate, and expanding infrastructure attract events across technology, retail, manufacturing, and livestock industries.',
            'Atlanta': 'Atlanta serves as the convention capital of the Southeast, anchored by the Georgia World Congress Center, one of the largest convention complexes in the country. The city\'s Hartsfield-Jackson International Airport, the busiest in the world, makes it exceptionally accessible. Major shows in food service, technology, flooring, and security call Atlanta home.',
            'Los Angeles': 'Los Angeles is a top-tier trade show destination, especially for entertainment, fashion, automotive, and technology events. The Los Angeles Convention Center and venues across the metro area host major exhibitions that draw international audiences. The city\'s creative energy, media influence, and diverse economy make every show here a global event.',
            'San Francisco': 'San Francisco and the broader Bay Area are at the heart of the technology trade show circuit. Events like RSA Conference, Dreamforce, and GDC attract hundreds of thousands of tech professionals each year. The Moscone Center serves as the primary venue, while the region\'s concentration of tech companies and venture capital creates an unrivaled innovation ecosystem.',
            'Miami': 'Miami is a vibrant trade show city with a unique position as a gateway between North America and Latin America. The Miami Beach Convention Center hosts major events in art, boating, hospitality, and luxury goods. The city\'s international flavor, warm climate, and growing tech scene make it an increasingly popular destination for global exhibitions.',
            'Boston': 'Boston is a leading trade show city for healthcare, biotechnology, education, and technology. The Boston Convention and Exhibition Center (BCEC) hosts major events that draw from the city\'s world-renowned universities and research institutions. The concentration of hospitals, biotech firms, and tech startups creates a rich attendee base for specialized industry events.',
            'Denver': 'Denver has emerged as a fast-growing trade show destination, offering the Colorado Convention Center and a rapidly expanding metro area. The city\'s central location, outdoor lifestyle, and booming tech scene attract events in energy, cannabis, outdoor recreation, and technology. Denver\'s accessibility and quality of life make it increasingly popular with event organizers.',
            'Nashville': 'Nashville is one of the fastest-rising trade show cities in the United States. The Music City Center, a state-of-the-art convention facility, has transformed the city into a serious contender for major national events. Beyond its famous music scene, Nashville draws shows in healthcare, technology, food and beverage, and franchise industries.',
            'Philadelphia': 'Philadelphia offers a strong trade show market rooted in healthcare, pharmaceuticals, manufacturing, and life sciences. The Pennsylvania Convention Center, located in the heart of Center City, provides modern facilities for large-scale events. The city\'s rich history, walkability, and position along the Northeast Corridor make it a convenient and appealing destination.',
            'San Diego': 'San Diego is a premier trade show city known for its perfect weather, the San Diego Convention Center, and proximity to the U.S.-Mexico border. The city hosts major events in biotechnology, defense, comics and entertainment, and hospitality. San Diego\'s quality of life and research institutions make it a magnet for specialized industry gatherings.',
            'Washington': 'Washington, D.C. is the go-to destination for trade shows in government, defense, policy, and association events. The Walter E. Washington Convention Center hosts major exhibitions, while the city\'s concentration of federal agencies, embassies, and nonprofits creates a unique attendee base. Events here often shape national and international policy.',
            'Seattle': 'Seattle is a key trade show city for technology, aerospace, maritime, and outdoor industries. The Washington State Convention Center and the city\'s thriving tech ecosystem, home to Amazon, Microsoft, and Boeing, draw specialized events from around the world. Seattle\'s innovation culture and Pacific Rim connections add global reach to every exhibition.',
            'Austin': 'Austin has become a dynamic trade show destination, famous for SXSW and a growing roster of technology, music, and creative industry events. The Austin Convention Center and the city\'s entrepreneurial culture attract forward-thinking exhibitors and attendees. Austin\'s rapid growth, affordability relative to coastal cities, and vibrant culture continue to draw new events.',
            'Phoenix': 'Phoenix is a growing trade show market, offering the Phoenix Convention Center and year-round warm weather. The city\'s expanding population, business-friendly environment, and proximity to major Western markets make it an attractive option for events in technology, real estate, agriculture, and automotive industries.',
            'Minneapolis': 'Minneapolis is a strong Midwestern trade show city, home to the Minneapolis Convention Center and a diverse economy that spans healthcare, agriculture, retail, and technology. The city\'s corporate headquarters concentration, cultural amenities, and efficient infrastructure make it a reliable host for national and regional exhibitions.',
            'London': 'London is Europe\'s largest trade show city and a global hub for exhibitions in technology, finance, fashion, defense, and healthcare. Venues like ExCeL London and Olympia host hundreds of international events each year. The city\'s position as a global financial center, its diverse population, and excellent transport links make it a premier destination for exhibitors targeting European and international markets.',
            'Paris': 'Paris is one of the world\'s most important trade show destinations, home to iconic venues like Paris Expo Porte de Versailles and Paris Nord Villepinte. The city hosts landmark events in aerospace, defense, food, fashion, and construction. Paris\'s cultural prestige, central European location, and robust transportation infrastructure make it a top choice for global exhibitions.',
            'Berlin': 'Berlin is Germany\'s capital of innovation and a major European trade show city. Messe Berlin hosts world-class events like IFA and ITB, attracting exhibitors and attendees from across the globe. The city\'s creative energy, startup ecosystem, and affordable infrastructure compared to other European capitals make it an increasingly popular exhibition destination.',
            'Frankfurt': 'Frankfurt is a powerhouse trade show city, home to Messe Frankfurt, one of the world\'s largest trade fair companies. The city hosts iconic events like the Frankfurt Book Fair, Automechanika, and Light + Building. Frankfurt\'s position as a financial and transportation hub in the heart of Europe makes it a natural gathering point for global industries.',
            'Munich': 'Munich is one of Germany\'s premier trade show cities, offering Messe M\u00fcnchen and a thriving economy rooted in automotive, technology, and manufacturing. The city hosts world-renowned events like bauma, ISPO, and electronica. Munich\'s quality of life, engineering excellence, and strong international connections make it a top-tier destination for trade exhibitions.',
            'Dubai': 'Dubai has rapidly established itself as the Middle East\'s leading trade show destination, with venues like the Dubai World Trade Centre and Dubai Exhibition Centre at Expo City. The city hosts major events in construction, energy, technology, and luxury goods. Dubai\'s tax-free business environment, strategic location between East and West, and world-class infrastructure attract exhibitors from every continent.',
            'Singapore': 'Singapore is Southeast Asia\'s premier trade show hub, offering the Sands Expo and Convention Centre and Singapore EXPO. The city-state hosts major events in technology, maritime, aerospace, food, and finance. Singapore\'s strategic location, business-friendly policies, and reputation for efficiency make it the gateway for companies seeking to access Asian markets.',
            'Tokyo': 'Tokyo is Asia\'s largest trade show market, home to Tokyo Big Sight and Makuhari Messe. The city hosts major exhibitions in automotive, electronics, manufacturing, food, and fashion. Japan\'s precision engineering culture, massive domestic market, and global corporate presence make Tokyo an essential destination for companies doing business in the Asia-Pacific region.',
            'Shanghai': 'Shanghai is China\'s trade show capital and one of the busiest exhibition cities in the world. The National Exhibition and Convention Center and Shanghai New International Expo Centre host massive events in automotive, manufacturing, food, technology, and consumer goods. Shanghai\'s role as China\'s commercial gateway and its rapidly growing economy make it a critical destination for global exhibitors.',
            'Mumbai': 'Mumbai is India\'s leading trade show city, hosting major events at the Bombay Exhibition Centre and Jio World Convention Centre. The city serves as the commercial and financial capital of India, drawing exhibitions in pharmaceuticals, textiles, technology, automotive, and food processing. Mumbai\'s massive domestic market, entrepreneurial energy, and growing middle class make it an increasingly important destination on the global trade show circuit.'
        };

        // Popular cities for "Browse More Cities" section
        var POPULAR_CITIES = [
            { name: 'Las Vegas', slug: 'las-vegas' },
            { name: 'Orlando', slug: 'orlando' },
            { name: 'Chicago', slug: 'chicago' },
            { name: 'New York', slug: 'new-york' },
            { name: 'Houston', slug: 'houston' },
            { name: 'Dallas', slug: 'dallas' },
            { name: 'Atlanta', slug: 'atlanta' },
            { name: 'Los Angeles', slug: 'los-angeles' },
            { name: 'San Francisco', slug: 'san-francisco' },
            { name: 'Miami', slug: 'miami' },
            { name: 'Boston', slug: 'boston' },
            { name: 'Denver', slug: 'denver' },
            { name: 'Nashville', slug: 'nashville' },
            { name: 'Philadelphia', slug: 'philadelphia' },
            { name: 'San Diego', slug: 'san-diego' },
            { name: 'Washington', slug: 'washington' },
            { name: 'Seattle', slug: 'seattle' },
            { name: 'Austin', slug: 'austin' },
            { name: 'Phoenix', slug: 'phoenix' },
            { name: 'Minneapolis', slug: 'minneapolis' },
            { name: 'London', slug: 'london' },
            { name: 'Paris', slug: 'paris' },
            { name: 'Berlin', slug: 'berlin' },
            { name: 'Frankfurt', slug: 'frankfurt' },
            { name: 'Munich', slug: 'munich' },
            { name: 'Dubai', slug: 'dubai' },
            { name: 'Singapore', slug: 'singapore' },
            { name: 'Tokyo', slug: 'tokyo' },
            { name: 'Shanghai', slug: 'shanghai' },
            { name: 'Mumbai', slug: 'mumbai' }
        ];

        // Parse city slug from URL path: /trade-shows-in/{city-slug}
        var path = window.location.pathname;
        var match = path.match(/\/trade-shows-in\/([^\/]+?)(?:\.html)?$/);
        var citySlug = match ? match[1] : '';

        if (!citySlug) {
            document.getElementById('page-content').innerHTML = '<div style="text-align:center;padding:4rem 2rem"><h2 style="font-size:1.5rem;color:#0a0a0a;margin-bottom:1rem">Trade Shows by City</h2><p style="color:#64748b;margin-bottom:2rem">Select a city to browse trade shows in that location.</p></div>';
            document.title = 'Trade Shows by City 2026 - ShowFloorTips';
            return;
        }

        // Convert slug to city name: "las-vegas" -> "Las Vegas"
        function slugToCity(slug) {
            return slug.split('-').map(function(word) {
                return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();
            }).join(' ');
        }

        var cityName = slugToCity(citySlug);

        // Check if shows data is loaded
        if (typeof SHOWS_DATA === 'undefined') {
            document.getElementById('page-content').innerHTML = '<div style="text-align:center;padding:4rem 2rem;color:#64748b">Loading show data...</div>';
            return;
        }

        // Filter shows by city (case-insensitive)
        var cityNameLower = cityName.toLowerCase();
        var shows = [];
        for (var i = 0; i < SHOWS_DATA.length; i++) {
            if (SHOWS_DATA[i].city && SHOWS_DATA[i].city.toLowerCase() === cityNameLower) {
                shows.push(SHOWS_DATA[i]);
            }
        }

        // Sort by attendees descending
        shows.sort(function(a, b) {
            var numA = parseInt(String(a.attendees || '0').replace(/[^0-9]/g, ''), 10) || 0;
            var numB = parseInt(String(b.attendees || '0').replace(/[^0-9]/g, ''), 10) || 0;
            if (numA !== numB) return numB - numA;
            return a.title.localeCompare(b.title);
        });

        // If the city has shows, use the actual city name from the first show for correct casing
        if (shows.length > 0 && shows[0].city) {
            cityName = shows[0].city;
        }

        // Page meta
        document.title = 'Trade Shows in ' + cityName + ' 2026 | Top ' + shows.length + ' ' + cityName + ' Expos - ShowFloorTips';

        var metaDesc = document.createElement('meta');
        metaDesc.name = 'description';
        metaDesc.content = 'Discover ' + shows.length + ' trade shows and exhibitions in ' + cityName + ' for 2026. Browse upcoming expos with dates, venues, exhibitor tips, and attendee information.';
        document.head.appendChild(metaDesc);

        var canonical = document.createElement('link');
        canonical.rel = 'canonical';
        canonical.href = 'https://showfloortips.com/trade-shows-in/' + citySlug;
        document.head.appendChild(canonical);

        // Schema.org ItemList
        var schemaItems = [];
        var schemaCount = Math.min(shows.length, 50);
        for (var si = 0; si < schemaCount; si++) {
            var ss = shows[si];
            var eventSchema = {
                '@type': 'ListItem',
                'position': si + 1,
                'item': {
                    '@type': 'Event',
                    'name': ss.title,
                    'url': 'https://showfloortips.com/shows/' + ss.slug,
                    'eventAttendanceMode': 'https://schema.org/OfflineEventAttendanceMode',
                    'eventStatus': 'https://schema.org/EventScheduled'
                }
            };
            if (ss.sort_date) eventSchema.item.startDate = ss.sort_date;
            if (ss.city || ss.country) {
                eventSchema.item.location = {
                    '@type': 'Place',
                    'name': ss.venue || ss.city || '',
                    'address': {
                        '@type': 'PostalAddress',
                        'addressLocality': ss.city || '',
                        'addressRegion': ss.state || '',
                        'addressCountry': ss.country || ''
                    }
                };
            }
            if (ss.image) eventSchema.item.image = ss.image;
            schemaItems.push(eventSchema);
        }

        var schemaScript = document.createElement('script');
        schemaScript.type = 'application/ld+json';
        schemaScript.textContent = JSON.stringify({
            '@context': 'https://schema.org',
            '@type': 'ItemList',
            'name': 'Trade Shows in ' + cityName + ' 2026',
            'description': 'Top trade shows and exhibitions in ' + cityName,
            'numberOfItems': shows.length,
            'itemListElement': schemaItems
        });
        document.head.appendChild(schemaScript);

        // Count unique categories and venues
        var categoriesSet = {};
        var venuesSet = {};
        for (var cs = 0; cs < shows.length; cs++) {
            if (shows[cs].category) categoriesSet[shows[cs].category] = 1;
            if (shows[cs].venue) venuesSet[shows[cs].venue] = 1;
        }
        var categoryCount = Object.keys(categoriesSet).length;
        var venueCount = Object.keys(venuesSet).length;

        // Handle no shows found
        if (shows.length === 0) {
            var noShowsHtml = '<div class="city-hero">';
            noShowsHtml += '<h1>Trade Shows in ' + escapeHtml(cityName) + ' 2026</h1>';
            noShowsHtml += '<p>We don\'t currently have any trade shows listed for ' + escapeHtml(cityName) + '. Browse other popular cities below.</p>';
            noShowsHtml += '</div>';
            noShowsHtml += '<div class="city-content">';
            noShowsHtml += buildBrowseCities(citySlug);
            noShowsHtml += '</div>';
            document.getElementById('page-content').innerHTML = noShowsHtml;
            return;
        }

        // Build hero
        var html = '<div class="city-hero">';
        html += '<h1>Trade Shows in ' + escapeHtml(cityName) + ' 2026</h1>';
        var introText = CITY_INTROS[cityName];
        if (introText) {
            html += '<p>' + escapeHtml(introText.substring(0, 180)) + '...</p>';
        } else {
            html += '<p>Discover the top trade shows, expos, and exhibitions happening in ' + escapeHtml(cityName) + '. Browse events by size, date, and industry.</p>';
        }
        html += '<div class="hero-stats">';
        html += '<div class="hero-stat"><div class="hero-stat-num">' + shows.length.toLocaleString() + '</div><div class="hero-stat-label">Shows</div></div>';
        html += '<div class="hero-stat"><div class="hero-stat-num">' + categoryCount + '</div><div class="hero-stat-label">Categories</div></div>';
        html += '<div class="hero-stat"><div class="hero-stat-num">' + venueCount + '</div><div class="hero-stat-label">Venues</div></div>';
        html += '</div></div>';

        // City intro
        html += '<div class="city-content">';
        if (introText) {
            html += '<div class="city-intro">' + escapeHtml(introText) + '</div>';
        }

        // Cards
        var INITIAL_COUNT = 50;
        html += '<h2 style="font-size:1.4rem;font-weight:700;color:#0a0a0a;margin-bottom:1.25rem">Top Trade Shows in ' + escapeHtml(cityName) + ', Ranked by Attendance</h2>';
        html += '<div class="city-grid" id="showGrid">';

        var renderCount = Math.min(shows.length, INITIAL_COUNT);
        for (var c = 0; c < renderCount; c++) {
            html += buildCard(shows[c], c);
        }
        html += '</div>';

        // Load more
        if (shows.length > INITIAL_COUNT) {
            html += '<div class="load-more-container"><button class="load-more-btn" id="loadMoreBtn">Show More (' + (shows.length - INITIAL_COUNT) + ' remaining)</button></div>';
        }

        // Scannly CTA
        html += '<div class="scannly-cta">';
        html += '<h3>Exhibiting at a Trade Show in ' + escapeHtml(cityName) + '?</h3>';
        html += '<p>Capture every lead at your booth with Scannly. Scan badges, share contact info via QR code, and export leads instantly.</p>';
        html += '<a href="https://apps.apple.com/us/app/scannly/id6746970463" target="_blank" rel="noopener">Download Scannly Free</a>';
        html += '</div>';

        // Browse More Cities
        html += buildBrowseCities(citySlug);

        html += '</div>'; // close city-content

        document.getElementById('page-content').innerHTML = html;

        // Load more functionality
        var currentVisible = INITIAL_COUNT;
        var loadMoreBtn = document.getElementById('loadMoreBtn');
        if (loadMoreBtn) {
            loadMoreBtn.addEventListener('click', function() {
                var grid = document.getElementById('showGrid');
                var nextBatch = Math.min(currentVisible + 50, shows.length);
                var fragment = '';
                for (var lb = currentVisible; lb < nextBatch; lb++) {
                    fragment += buildCard(shows[lb], lb);
                }
                grid.insertAdjacentHTML('beforeend', fragment);
                currentVisible = nextBatch;
                if (currentVisible >= shows.length) {
                    loadMoreBtn.parentElement.style.display = 'none';
                } else {
                    loadMoreBtn.textContent = 'Show More (' + (shows.length - currentVisible) + ' remaining)';
                }
            });
        }

        function buildCard(show, index) {
            var loc = show.city || '';
            if (show.state) loc += ', ' + show.state;
            if (show.country && show.country !== 'United States') {
                loc = show.city || '';
                if (show.country) loc += ', ' + show.country;
            }

            var c = '<div class="city-card">';
            c += '<div class="city-rank">' + (index + 1) + '</div>';
            c += '<div class="city-card-body">';
            c += '<h3><a href="/shows/' + show.slug + '">' + escapeHtml(show.title) + '</a></h3>';
            c += '<div class="city-card-meta">';
            if (show.date) c += '<span class="city-card-tag">üìÖ ' + escapeHtml(show.date) + '</span>';
            if (show.category) c += '<span class="city-card-tag">üè∑Ô∏è ' + escapeHtml(show.category) + '</span>';
            if (show.exhibitors) c += '<span class="city-card-tag">üè¢ ' + escapeHtml(show.exhibitors) + ' exhibitors</span>';
            c += '</div>';
            if (show.description) {
                var desc = show.description.length > 160 ? show.description.substring(0, 157) + '...' : show.description;
                c += '<div class="city-card-desc">' + escapeHtml(desc) + '</div>';
            }
            c += '</div>';
            c += '<div class="city-card-action">';
            if (show.attendees) c += '<span class="card-attendees">üë• ' + escapeHtml(show.attendees) + '</span>';
            c += '<a href="/shows/' + show.slug + '" class="btn-view">View Details</a>';
            c += '</div>';
            c += '</div>';
            return c;
        }

        function buildBrowseCities(activeCitySlug) {
            var h = '<div class="browse-cities">';
            h += '<h3>Browse More Cities</h3>';
            h += '<div class="browse-cities-grid">';
            for (var pc = 0; pc < POPULAR_CITIES.length; pc++) {
                var city = POPULAR_CITIES[pc];
                var isActive = city.slug === activeCitySlug ? ' active' : '';
                h += '<a href="/trade-shows-in/' + city.slug + '" class="' + isActive + '">' + city.name + '</a>';
            }
            h += '</div></div>';
            return h;
        }

        function escapeHtml(str) {
            if (!str) return '';
            return String(str).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
        }

    })();
    </script>
</body>
</html>
